<%-include('layouts/header', {title: 'home'}) %>
<%-include('partials/menu') %> 
<section class="container" style="margin-top: 200px; margin-bottom: 200px;">
    <div class="row">       
        <a href="/user/logout" class="text-right mb-4 text-dark font-weight-bold d-block w-100">
            <svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" fill="currentColor" class="bi bi-box-arrow-left mr-2" viewBox="0 0 16 16">
                <path fill-rule="evenodd" d="M6 12.5a.5.5 0 0 0 .5.5h8a.5.5 0 0 0 .5-.5v-9a.5.5 0 0 0-.5-.5h-8a.5.5 0 0 0-.5.5v2a.5.5 0 0 1-1 0v-2A1.5 1.5 0 0 1 6.5 2h8A1.5 1.5 0 0 1 16 3.5v9a1.5 1.5 0 0 1-1.5 1.5h-8A1.5 1.5 0 0 1 5 12.5v-2a.5.5 0 0 1 1 0v2z"/>
                <path fill-rule="evenodd" d="M.146 8.354a.5.5 0 0 1 0-.708l3-3a.5.5 0 1 1 .708.708L1.707 7.5H10.5a.5.5 0 0 1 0 1H1.707l2.147 2.146a.5.5 0 0 1-.708.708l-3-3z"/>
                </svg>
            Cerrar sesi√≥n
        </a>
        <% if(user){ %>
            <h3 class="mb-4">Hola <%=user.name_lastname%></h3>
        <% } %>    
        <div class="col-12 mb-5 bg-primary pt-3 pb-3 pl-5 pr-5">
            <h1 class="text-white mb-0 w-100 d-flex justify-content-between align-items-center">Mis mensajes
                <svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" fill="currentColor" class="bi bi-envelope messages_envelope" viewBox="0 0 16 16">
                    <path fill-rule="evenodd" d="M0 4a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V4zm2-1a1 1 0 0 0-1 1v.217l7 4.2 7-4.2V4a1 1 0 0 0-1-1H2zm13 2.383l-4.758 2.855L15 11.114v-5.73zm-.034 6.878L9.271 8.82 8 9.583 6.728 8.82l-5.694 3.44A1 1 0 0 0 2 13h12a1 1 0 0 0 .966-.739zM1 11.114l4.758-2.876L1 5.383v5.73z"/>
                </svg>
                <svg xmlns="http://www.w3.org/2000/svg" width="35" height="35" fill="currentColor" class="bi bi-inbox messages_inbox d-none link_cursor" viewBox="0 0 16 16">
                    <path fill-rule="evenodd" d="M4.98 4a.5.5 0 0 0-.39.188L1.54 8H6a.5.5 0 0 1 .5.5 1.5 1.5 0 1 0 3 0A.5.5 0 0 1 10 8h4.46l-3.05-3.812A.5.5 0 0 0 11.02 4H4.98zm9.954 5H10.45a2.5 2.5 0 0 1-4.9 0H1.066l.32 2.562a.5.5 0 0 0 .497.438h12.234a.5.5 0 0 0 .496-.438L14.933 9zM3.809 3.563A1.5 1.5 0 0 1 4.981 3h6.038a1.5 1.5 0 0 1 1.172.563l3.7 4.625a.5.5 0 0 1 .105.374l-.39 3.124A1.5 1.5 0 0 1 14.117 13H1.883a1.5 1.5 0 0 1-1.489-1.314l-.39-3.124a.5.5 0 0 1 .106-.374l3.7-4.625z"/>
                  </svg>
            </h1>
        </div>
        <div class="col-12 table-responsive" id="messages_table">
            <% if(message){ %>
            <div class="mb-4">
                <%-include('partials/alerts') %>
            </div>
            <% } %>
            <table class="table">
                <thead>
                    <tr>
                        <th class="text-center" scope="col"></th>
                        <th class="text-center" scope="col">De</th>
                        <th class="text-center" scope="col">Fecha</th>
                    </tr>
                </thead>
                <tbody>
                 <% if(all_messages){ %>
                    <% for(i of all_messages){ %>
                        <tr class="link_cursor user_answear_message">
                            <td class="text-center">
                                <a href="/deletemessage/<%= i._id %>">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" class="bi bi-trash text-danger" viewBox="0 0 16 16">
                                        <path d="M5.5 5.5A.5.5 0 0 1 6 6v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm2.5 0a.5.5 0 0 1 .5.5v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm3 .5a.5.5 0 0 0-1 0v6a.5.5 0 0 0 1 0V6z"/>
                                        <path fill-rule="evenodd" d="M14.5 3a1 1 0 0 1-1 1H13v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V4h-.5a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1H6a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1h3.5a1 1 0 0 1 1 1v1zM4.118 4L4 4.059V13a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1V4.059L11.882 4H4.118zM2.5 3V2h11v1h-11z"/>
                                    </svg>
                                </a>
                            </td>
                            <td class="text-center font-weight-bold">
                                <%= i.from %>
                            </td>
                            <td class="text-center font-weight-bold">
                                <%= helpers.date(i.timeStamp)%>
                            </td>
                            <input class="user_id" type="hidden" value="id del usuario <%= i.user_id %>" >
                            <input class="product_id" type="hidden" value="imagen del producto <%= i.product_img %>">
                            <input id="user_message" type="hidden" value="mensaje del usuario <%= i.message %>">
                            <input type="hidden" value="telefono del usuario<%= i.phone%>">
                            <input type="hidden" value="nombres del usuario<%= i.names%>">
                            <input type="hidden" value="apellidos del usuario<%= i.lastname%>">
                            <input type="hidden" value="marca del producto<%= i.car_brand%>">
                            <input type="hidden" value="modelo del producto<%= i.car_model%>">
                        </tr>
                    <% } %>    
                <% } %>
                </tbody>
            </table>
        </div>
    </div>
</section>
<%-include('partials/footer') %>
<%-include('layouts/footer') %>